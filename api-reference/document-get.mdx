---
title: 'Obtener documento específico'
openapi: 'GET /master-entities/{master_entity_id}/documents/{document_id}'
---

Obtiene toda la información completa de un documento tributario específico, incluyendo el PDF y XML cuando están disponibles. Este endpoint es útil para consultar detalles completos de un documento ya emitido o recibido.

### Parámetros de URL

| Parámetro | Tipo | Requerido | Descripción |
|-----------|------|-----------|-------------|
| master_entity_id | integer | Sí | ID de la entidad emisora o receptora del documento |
| document_id | integer | Sí | ID único del documento a consultar |


### Respuesta Exitosa (200 OK)

La respuesta incluye toda la información del documento más archivos PDF y XML:

#### Campos principales del documento:
- `id`: ID único del documento
- `folio`: Número de folio asignado por el SII (puede ser null si aún no está disponible)
- `date_issued`: Fecha de emisión (ISO 8601)
- `amount_with_iva`: Monto total con IVA incluido
- `amount_iva`: Monto del IVA
- `amount_without_iva`: Monto sin IVA
- `currency`: Moneda (`CLP`, `UF`, `USD`, `EUR`)

#### Información de entidades:
- `sender_id`: ID de la entidad emisora
- `sender_name`: Nombre de la entidad emisora
- `sender_tax_id`: RUT de la entidad emisora
- `receiver_id`: ID de la entidad receptora (puede ser null para algunos tipos de documentos)
- `receiver_name`: Nombre de la entidad receptora
- `receiver_tax_id`: RUT de la entidad receptora

#### Tipo de documento:
- `dte_type_code`: Código numérico del tipo de DTE (ej: 33 para Factura Electrónica)
- `dte_type_description`: Descripción del tipo de DTE

#### Archivos:
- `pdf`: URL presignada al PDF del documento (válida por tiempo limitado)
- `xml`: Contenido completo del XML del documento tributario electrónico
- `xml_error`: Mensaje de error si no se pudo obtener el XML (null si está disponible)

#### Trazas y estado:
- `has_trace`: `true` si el documento tiene trazas de envío al SII, `false` en caso contrario
- `latest_trace_info`: Información de la última traza disponible (estado de envío, fecha, etc.)

#### Referencias:
- `references`: Array de documentos referenciados (para notas de crédito, etc.)

#### Metadatos:
- `created_at`: Fecha de creación del registro (ISO 8601)
- `updated_at`: Fecha de última actualización (ISO 8601)

### Ejemplo de respuesta completa:

```json
{
  "id": 12345,
  "folio": 12345678,
  "date_issued": "2024-01-15T10:30:00Z",
  "amount_with_iva": 119000,
  "amount_iva": 19000,
  "amount_without_iva": 100000,
  "currency": "CLP",
  "sender_id": 678,
  "sender_name": "Empresa Ejemplo SpA",
  "sender_tax_id": "76543210-1",
  "receiver_id": 901,
  "receiver_name": "Cliente Importante Ltda",
  "receiver_tax_id": "12345678-9",
  "dte_type_code": 33,
  "dte_type_description": "Factura Electrónica",
  "pdf": "https://api.tupana.ai/api/documents/12345/pdf/?signature=...",
  "xml": "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><DTE version=\"1.0\">...</DTE>",
  "xml_error": null,
  "has_trace": true,
  "latest_trace_info": {
    "status": "accepted",
    "timestamp": "2024-01-15T10:35:00Z",
    "description": "Documento aceptado por el SII"
  },
  "references": [],
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:35:00Z"
}
```
### Códigos de Error

- **400 Bad Request**: Parámetros inválidos
- **401 Unauthorized**: API Key faltante o inválida
- **403 Forbidden**: Sin permisos para acceder a la entidad especificada
- **404 Not Found**: Documento o entidad no encontrada

### Notas Importantes

- El PDF se obtiene dinámicamente y puede tomar unos segundos en generarse si no está cacheado
- Las URLs presignadas del PDF tienen una expiración limitada (generalmente 1 hora)
- El XML solo está disponible para documentos que han sido enviados al SII
- Para documentos muy antiguos, es posible que el XML no esté disponible en el sistema
- El campo `xml_error` indica problemas específicos al obtener el XML
